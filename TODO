Gobby
=====

Blocker:

Critical:

Major:
  * gethostbyname on win32 (#19)
  * Bug: User attribution copied when using copy & paste (#24)

Normal:
  * Improve the network handling on Win32 (#2)
  * Implement support for Zeroconf (#17)
  * Provide some means of authentication (#21)
  * A flag specifing if a document has changed (#25)
  * Request confirmations for unsaved documents (#26)
  * Switch to tabs newly opened (#27)

Minor:
  * Error code transmission (#16)
  * Repaint of user colour incorrect (#22)

Trivial:

Enhancement:
  * Highlighting of own nickname in chat window (#6)
  * Flags for obby::user (#8)
  * Syncronise documents on request (#10)
  * Multiple user lists (#12)
  * Translate failure messages with gettext (#14)
  * Session serialisation (#20)
  * Auto indentation (#23)

19: gethostbyname on win32
--------------------------
net6 should use gethostbyname instead of getaddrinfo for the win32 
implementation because getaddrinfo seem only to exist in Windows XP's 
version of ws2_32.dll.

24: Bug: User attribution copied when using copy & paste
--------------------------------------------------------
If somebody copies some text of another user on the host and pastes it then 
it will show up temporarily as own text, but it will get the other user's 
colour after the next redraw.

2: Improve the network handling on Win32
----------------------------------------
Opening large documents is ''really'' slow on the timer implementation in 
use on Win32. Currently the connection is polled every 400ms, which is 
certainly not optimal.

17: Implement support for Zeroconf
----------------------------------
''Zeroconf'' (also known as Apple Bonjour) is a technology to discover 
local network services. The Gobby host may announce itself as a network 
service which could be browsed by other clients on the local subnet. The 
listing and delisting is implemented with the use of multicast DNS and 
happens automatically. ''libobby'' contains an abstraction to the ''howl'' 
implementation of this protocol.

 * We need to add a linking exception for ''howl'' to ''libobby'' (#18).
 * We need a UI implementation of ''Zeroconf'' within ''Gobby's '' join 
dialog.
 * We need proper integration into the GUI main loop on Linux (possibly 
eliminating the necessity to start mDNSResponder prior to a ''howl'' using 
application).

21: Provide some means of authentication
----------------------------------------
''libobby'' should provide some means of authentication. There should be 
several possibilities of authentication schemes (maybe this ticket should 
be splitted when they are getting implemented one-by-one):

 * If a user logs in the first time since the host restarted a password 
specified by the user will be set on the server with which it could 
authenticate itself after a connection loss.
 * A simple global password is need to login into a server, known to all 
users of it.
 * The server checks a user/password combination against a user database, 
useful for dedicated private ''obby'' servers.
 * Single documents could be get some kind of password or access control 
list protection, but #10 has to be implemented first.

25: A flag specifing if a document has changed
----------------------------------------------
A flag should be implemented which specifies if the document has changed 
since the last save. It should be reset when it is saved to disk and 
changed as soon as the first change (local and non-local) is received and 
put into the text buffer.

26: Request confirmations for unsaved documents
-----------------------------------------------
Gobby should request a confirmation if you want to quit it and still have 
unsaved documents (#25) open in the session. 

27: Switch to tabs newly opened
-------------------------------
The current selected document should be changed to the one newly opened 
when loading one from a file.

16: Error code transmission
---------------------------
We should transmit error codes instead of error strings in net6. The client 
may build a (localised, see #14) string out of it.

22: Repaint of user colour incorrect
------------------------------------
If a user writes anything into a Gobby document, the background gets 
colourised with this users colour, but the operation is not performed 
immediately but with the next redraw of the cursor or the line or 
something.

6: Highlighting of own nickname in chat window
----------------------------------------------
Chat messages of others should be highlighted if the own nickname is 
mentioned in them.

8: Flags for obby::user
-----------------------
Extend obby::user with a 'flags' field. The idea behind is to introduce a 
flag like obby::user::connected which specifies if this user is currently 
connected to the obby session. We would not need the user_table classes any 
longer and resolve the confusion of obby::user vs. obby::user_table::user.

However, this feature _is_ dangerous because many code would have to be 
adjusted to ignore non-connected user. Maybe we can provide two iterators: 
user_iterator and connected_user_iterator or something. Or 
user_iterator::step(user::flags).

We should think and discuss about this before doing anything.

10: Syncronise documents on request
-----------------------------------
Currently, all documents are synced to incoming clients. Having large 
and/or many documents, this causes much network traffic even if a user just 
wants to edit one of these documents.

The idea is to send just a document list on connection. Users can subscribe 
and unsubscribe to documents which means that the document content is 
synced and they can edit the documents collaboratively until they 
unsubscribe.

create_document should subscribe the creating user automatically.

Of course, Gobby also needs many adjustments to support this feature.

12: Multiple user lists
-----------------------
Put a Gtk::Notebook around the user list and provide 4 user lists:

 * whole session: Display all users that are or were in the session since 
beginning
 * current session: Display all users that are currently in the session
 * whole document: Display all users that are or were subscribed to the 
selected document
 * current document: Display all users that are currently subscribed to the 
selected document

14: Translate failure messages with gettext
-------------------------------------------
The failure messages issued by net6 should be localised and translated with 
gettext.

20: Session serialisation
-------------------------
When multiple persons are editing a document the situation that one 
(perhaps the host) has to leave is quite common. ''libobby'' should support 
some kind of session serialisation while preserving the history (and thus 
the attribution of each character to the corresponding user) so that it 
could be easily resumed. Probably (possibly compressed) XML should be used 
to serialise a tree of objects. The following features should be 
implemented:

 * Load/save documents to/from file and/or memory (while preserving 
history)
 * Load/save complete obby session

23: Auto indentation
--------------------
GtkSourceView seems to support auto indentation. Gobby should provide an 
option to enable or disable this feature.

